---
// src/pages/snake/index.astro
import MainLayout from "../../layouts/MainLayout.astro";
import "../../styles/snake.css";
---

<MainLayout title="Snake Game â€” Supm3n">
  <main id="main-content" class="snake-page">
    <div class="game-container">
      <!-- 1. Top Bar: Branding & Score -->
      <header class="game-top-bar">
        <div class="game-branding">
          <h1>Snake_OS</h1>
        </div>

        <div class="score-board">
          <div class="score-item">
            <span class="score-label">Score</span>
            <span class="score-value" id="score">0</span>
          </div>
          <div class="score-item">
            <span class="score-label" id="high-score-label">Global Best</span>
            <span class="score-value" id="high-score">0</span>
          </div>
        </div>
      </header>

      <!-- 2. Canvas Wrapper (Flex Grow) -->
      <div class="game-wrapper">
        <canvas id="game-canvas"></canvas>

        <!-- Overlays -->
        <div id="game-over" class="game-overlay hidden">
          <h2>Terminated</h2>
          <p>Final Protocol: <span id="final-score">0</span></p>
          <button id="play-again-btn" class="btn btn-primary"
            >Reboot System</button
          >
        </div>

        <div id="game-start" class="game-overlay">
          <h2>Ready</h2>
          <p>Initialize Sequence</p>
        </div>
      </div>

      <!-- 3. Bottom Controls Bar -->
      <div class="controls-bar">
        <div class="action-buttons">
          <button id="start-btn" class="btn btn-primary">Run</button>
          <button id="pause-btn" class="btn btn-secondary" disabled
            >Pause</button
          >
          <button id="reset-btn" class="btn btn-secondary">Reset</button>
        </div>

        <div class="instructions">
          <div class="key-group">
            <kbd>WASD</kbd>
            <span>/</span>
            <kbd>Arrows</kbd> to Move
          </div>
          <div class="key-group">
            <kbd>Space</kbd> to Pause
          </div>
        </div>

        <!-- Decoration / Status -->
        <div style="display: flex; gap: 6px; opacity: 0.5;">
          <div
            style="width: 8px; height: 8px; background: #10B981; border-radius: 50%; box-shadow: 0 0 5px #10B981;"
          >
          </div>
        </div>
      </div>
    </div>
  </main>
</MainLayout>

<script>
  import { SnakeGame } from "../../scripts/snakeGame.js";
  document.addEventListener("DOMContentLoaded", () => {
    new SnakeGame();
  });
</script>
