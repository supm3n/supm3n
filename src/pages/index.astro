---
// src/pages/index.astro
import MainLayout from "../layouts/MainLayout.astro";
import ProjectCard from "../components/ProjectCard.astro";
import { projects } from "../data/projects.js";

// Filter only featured projects
const featuredProjects = projects.filter((p) => p.featured).slice(0, 3);
---

<MainLayout title="Supm3n â€” Build lean tools">
    <main id="main-content" role="main">
        <section class="hero-section">
            <div class="hero-content">
                <div class="glitch-wrapper">
                    <h1 class="hero-title" data-text="Supm3n">Supm3n</h1>
                </div>

                <div class="hero-subtitle">
                    Half-finished ideas and too much CSS.
                </div>

                <div class="hero-actions">
                    <a href="#featured-projects" class="cta-button primary-cta">
                        View Projects
                        <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                        >
                            <path d="M7 17L17 7M17 7H7M17 7V17"></path>
                        </svg>
                    </a>
                </div>
            </div>
        </section>

        <section class="projects-section" id="featured-projects">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-label">Selected Works</h2>
                </div>

                <div class="projects-grid">
                    {
                        featuredProjects.map((project) => (
                            <ProjectCard project={project} />
                        ))
                    }
                </div>
            </div>
        </section>
    </main>
</MainLayout>

<style>
    /* HERO LAYOUT - Centers content */
    .hero-section {
        min-height: 85vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 0 1.5rem;
        position: relative;
        margin-bottom: 4rem;
    }

    /* UPDATE: Added pointer-events: none 
       This allows the mouse to "fall through" the text to the canvas below
    */
    .hero-title {
        font-size: clamp(4rem, 12vw, 9rem);
        font-weight: 900;
        line-height: 0.9;
        letter-spacing: -0.04em;
        color: var(--color-heading);
        margin: 0;
        text-transform: uppercase;
        background: linear-gradient(to bottom right, #fff 30%, #94a3b8 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        position: relative;

        pointer-events: none; /* <--- ADDED THIS */
        user-select: none; /* <--- Optional: Prevents highlighting */
    }

    /* GLITCH EFFECT */
    .glitch-wrapper {
        position: relative;
        display: inline-block;
        margin-bottom: 1.5rem;
        pointer-events: none; /* <--- ADDED THIS */
    }

    .hero-title::before,
    .hero-title::after {
        content: attr(data-text);
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--color-base);
        opacity: 0.8;
    }

    .hero-title::before {
        left: 2px;
        text-shadow: -2px 0 var(--glitch-1);
        -webkit-text-fill-color: var(--color-heading);
        animation: glitch-anim-1 3s infinite linear alternate-reverse;
        clip-path: inset(20% 0 80% 0);
    }

    .hero-title::after {
        left: -2px;
        text-shadow: -2px 0 var(--glitch-2);
        -webkit-text-fill-color: var(--color-heading);
        animation: glitch-anim-2 2.5s infinite linear alternate-reverse;
        clip-path: inset(10% 0 60% 0);
    }

    @keyframes glitch-anim-1 {
        0% {
            clip-path: inset(20% 0 80% 0);
        }
        20% {
            clip-path: inset(60% 0 10% 0);
        }
        100% {
            clip-path: inset(30% 0 20% 0);
        }
    }
    @keyframes glitch-anim-2 {
        0% {
            clip-path: inset(10% 0 60% 0);
        }
        20% {
            clip-path: inset(30% 0 10% 0);
        }
        100% {
            clip-path: inset(40% 0 30% 0);
        }
    }

    /* TERMINAL SUBTITLE */
    .hero-subtitle {
        font-family: var(--font-mono);
        font-size: clamp(1rem, 2.5vw, 1.25rem);
        color: var(--color-text-muted);
        margin: 1.5rem auto 3rem;
        font-weight: 400;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;

        pointer-events: none; /* <--- ADDED THIS */
        user-select: none; /* <--- Optional */
    }

    .hero-subtitle::after {
        content: "_";
        color: var(--color-accent-start);
        animation: blink 1s step-end infinite;
        font-weight: 700;
    }

    @keyframes blink {
        0%,
        100% {
            opacity: 1;
        }
        50% {
            opacity: 0;
        }
    }

    /* CTA BUTTONS */
    .hero-actions {
        pointer-events: auto; /* <--- Ensures buttons remain clickable */
    }

    .cta-button {
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        padding: 1rem 2.5rem;
        border-radius: 12px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.3s ease;
        cursor: pointer;

        pointer-events: auto; /* <--- Extra safety */
    }

    .primary-cta {
        background: var(--color-text-primary);
        color: var(--color-base);
        box-shadow: 0 0 20px var(--shadow-sm);
    }
    .primary-cta:hover {
        transform: translateY(-3px);
        box-shadow: 0 0 30px var(--shadow-lg);
    }

    /* PROJECTS SECTION */
    .projects-section {
        padding-bottom: 8rem;
    }

    .section-label {
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        color: var(--color-text-muted);
        margin-bottom: 2rem;
        padding-left: 1rem;
        border-left: 3px solid var(--color-accent-start);
    }

    .projects-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
    }
</style>
