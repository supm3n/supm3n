---
// src/pages/index.astro
import MainLayout from "../layouts/MainLayout.astro";
import ProjectCard from "../components/ProjectCard.astro";
import { projects } from "../data/projects.js";

// Filter only featured projects if you have many, for now we show all or top 3
const featuredProjects = projects.filter((p) => p.featured).slice(0, 3);
---

<MainLayout title="Supm3n â€” Build lean tools">
    <main id="main-content" role="main">
        <!-- HERO SECTION -->
        <section class="hero">
            <div class="container">
                <div class="matrix-container">
                    <h1 class="hero-title matrix-text" data-text="Supm3n">
                        Supm3n
                    </h1>
                    <p
                        class="hero-tagline matrix-text"
                        data-text="Half-finished ideas and too much CSS."
                    >
                        Half-finished ideas and too much CSS.
                    </p>
                </div>
                <div class="hero-cta">
                    <a
                        href="#featured-projects"
                        class="btn btn-primary magnetic-btn">View Projects</a
                    >
                </div>
            </div>
        </section>

        <!-- PROJECTS SECTION -->
        <section class="projects-section" id="featured-projects">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Featured Projects</h2>
                </div>

                <div class="projects-grid">
                    {
                        featuredProjects.map((project) => (
                            <ProjectCard project={project} />
                        ))
                    }
                </div>
            </div>
        </section>
    </main>
</MainLayout>

<!-- STYLE SECTION -->
<style>
    /* HERO MATRIX VARIABLES */
    :root {
        --matrix-primary: var(--color-accent-start);
        --matrix-secondary: var(--color-accent-end);
    }

    /* HERO STYLES */
    .hero {
        padding: calc(var(--space-2xl) * 1.5) 0 var(--space-2xl);
        text-align: center;
        position: relative;
        overflow: hidden;
        mask-image: linear-gradient(
            to bottom,
            transparent 0%,
            black 10%,
            black 90%,
            transparent 100%
        );
        -webkit-mask-image: linear-gradient(
            to bottom,
            transparent 0%,
            black 10%,
            black 90%,
            transparent 100%
        );
    }

    .hero::before {
        content: "";
        position: absolute;
        top: -100%;
        left: 0;
        width: 100%;
        height: 200%;
        background: repeating-linear-gradient(
            0deg,
            transparent 0px,
            rgba(124, 58, 237, 0.15) 1px,
            rgba(6, 182, 212, 0.2) 2px,
            rgba(6, 182, 212, 0.3) 3px,
            transparent 4px,
            transparent 8px
        );
        animation: rain 8s linear infinite;
        z-index: 1;
        pointer-events: none;
        opacity: 0.8;
    }

    .matrix-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 2;
        position: relative;
    }

    .hero-title.matrix-text,
    .hero-tagline.matrix-text {
        color: var(--matrix-primary);
        font-family: monospace;
        position: relative;
        text-shadow:
            0 0 10px rgba(124, 58, 237, 0.9),
            0 0 20px rgba(124, 58, 237, 0.7);
        z-index: 2;
        margin-bottom: var(--space-lg);
        animation: fadeUp 0.6s var(--transition-base);
    }

    .hero-title.matrix-text {
        font-size: var(--text-4xl);
        font-weight: 800;
        letter-spacing: -0.03em;
    }
    .hero-tagline.matrix-text {
        font-size: var(--text-2xl);
        font-weight: 500;
        max-width: 650px;
        line-height: 1.5;
    }

    .hero-title.matrix-text::before,
    .hero-tagline.matrix-text::before {
        content: attr(data-text);
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        animation: glitch 2s infinite;
        clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%);
        transform: translate(-2px, -2px);
        color: var(--matrix-secondary);
        text-shadow: 0 0 5px rgba(6, 182, 212, 0.9);
    }

    @keyframes rain {
        0% {
            transform: translateY(0);
        }
        100% {
            transform: translateY(50%);
        }
    }
    @keyframes glitch {
        0%,
        100% {
            clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%);
            transform: translate(0);
        }
        33% {
            clip-path: polygon(0 0, 100% 0, 100% 15%, 0 15%);
            transform: translate(-5px, -5px);
        }
        66% {
            clip-path: polygon(0 85%, 100% 85%, 100% 100%, 0 100%);
            transform: translate(5px, 5px);
        }
    }

    @keyframes fadeUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* CTA BUTTONS */
    .hero-cta {
        display: flex;
        gap: var(--space-md);
        justify-content: center;
        flex-wrap: wrap;
        margin-top: var(--space-lg);
        position: relative;
        z-index: 5;
    }

    .btn {
        display: inline-flex;
        align-items: center;
        gap: var(--space-xs);
        padding: var(--space-sm) var(--space-lg);
        border-radius: 12px;
        font-size: var(--text-base);
        font-weight: 600;
        transition: all var(--transition-base);
        cursor: pointer;
        border: 1px solid transparent;
        text-decoration: none;
    }

    .btn-primary {
        background: linear-gradient(
            135deg,
            var(--color-accent-start),
            var(--color-accent-end)
        );
        color: #fff;
        box-shadow: 0 4px 16px rgba(124, 58, 237, 0.3);
    }
    .btn-primary:hover {
        transform: translateY(-3px) scale(1.02);
        box-shadow: 0 8px 32px rgba(124, 58, 237, 0.5);
    }

    /* PROJECTS GRID */
    .projects-section {
        padding: calc(var(--space-2xl) * 0.75) 0;
        position: relative;
    }

    .projects-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: clamp(1.5rem, 3vw, 2rem);
        margin-top: var(--space-xl);
    }

    @media (max-width: 768px) {
        .hero-title.matrix-text {
            font-size: var(--text-3xl);
        }
        .projects-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
